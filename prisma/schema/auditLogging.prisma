type Entity {
  type String
  id   String @db.ObjectId
}

type Changes {
  before Json?
  after  Json?
}

type RequestMetadata {
  userAgent String
  ip        String
  path      String
  method    String
}

model AuditLogging {
  id             String           @id @default(auto()) @map("_id") @db.ObjectId
  organizationId String?           @db.ObjectId
  userId         String           @db.ObjectId
  user           User             @relation(fields: [userId], references: [id], onDelete: Cascade)
  type           String
  severity       String
  entity         Entity
  changes        Changes?
  metadata       RequestMetadata?
  description    String?
  archiveStatus  Boolean          @default(false)
  archiveDate    DateTime?
  isDeleted      Boolean          @default(false)
  timestamp      DateTime         @default(now())
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt

  @@index([userId])
  @@index([type])
  @@index([severity])
  @@index([archiveStatus])
  @@index([isDeleted])
  @@index([timestamp])
  @@index([organizationId])
  @@map("auditLogs")
}

